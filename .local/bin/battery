#!/bin/env bash

# Count batteries
bat_count=$(ls /sys/class/power_supply | wc -l)

if [ ! $bat_count -eq 0 ]; then

  if [ "$1" == "tmux" ]; then
    stat="$(acpi | sed \
    "s/Battery [0-9]: //;\
    s/[Dd]ischarging,*/ï‰€/;\
    s/[Nn]ot charging, /ðŸ›‘/;\
    s/[Cc]harging, /ðŸ”Œ/;\
    s/[Uu]nknown, /ï†¸/;\
    s/[Ff]ull, /âš¡/;\
    s/ \(remaining\|until charged\)//;\
    s/, [0-9]*:[0-9]*:[0-9]*//g")" > /dev/null
    echo $stat
  else
    stat="$(acpi | sed \
    "s/Battery [0-9]: //;\
    s/[Dd]ischarging,*/ðŸ”‹/;\
    s/[Nn]ot charging, /ðŸ›‘/;\
    s/[Cc]harging, /ðŸ”Œ/;\
    s/[Uu]nknown, /â™»ï¸/;\
    s/[Ff]ull, /âš¡/;\
    s/ \(remaining\|until charged\)//;\
    s/, [0-9]*:[0-9]*:[0-9]*//g")" > /dev/null
  echo $stat
  fi

else
  exit 0
fi
